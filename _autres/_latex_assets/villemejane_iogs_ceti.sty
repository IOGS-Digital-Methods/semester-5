\usepackage[margin=2cm]{geometry}
\usepackage{graphicx}
\usepackage{lipsum}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{fancyhdr}
\usepackage[most]{tcolorbox}
\usepackage[authoryear]{natbib}
\usepackage{blindtext} %for dummy text. Can remove when used with real text.

\usepackage{multirow}
\usepackage{amsfonts}

\usepackage [french]{babel}
\usepackage [autostyle, english = american]{csquotes}
%\usepackage [T1]{fontenc}
\usepackage [utf8]{inputenc}
\MakeOuterQuote{"}

\usepackage{enumitem}
\usepackage[normalem]{ulem}

\usepackage{listings}
\lstset{language = Python, 
	basicstyle={\small \color{black}}, 
	tabsize = 3,
	commentstyle=\color{black!70!green},
	linewidth=160mm,
	framexleftmargin=5mm, frame=shadowbox, rulesepcolor=\color{black},
  	numbers=left,
	xleftmargin=40pt,
	escapechar=|
}

% Inclure des pdf
\usepackage{pdfpages}

\usepackage{tikz}
\usepackage{pgfplots}

\usepackage[european, straightvoltages]{circuitikz}
\usetikzlibrary{babel, patterns, patterns.meta, calc}
\usepackage{subcaption}
\usepackage{schemabloc}
\usepackage{colortbl}

% Styles
\pagestyle{fancy}
\fancyhf{}
\rhead{\@title{}}
\lhead{\moduleAbrege{}}
\rfoot{\thepage}

\linespread{1.3}

\definecolor{blue(ryb)}{rgb}{0.01, 0.28, 1.0}
\definecolor{orangeIO(ryb)}{rgb}{1.0, 0.59, 0.04}
\definecolor{violetIO(ryb)}{rgb}{0.04, 0.19, 0.31}
\def\nbR{\ensuremath{\mathrm{I\!R}}}

%% Nouveau titre
\makeatletter
\def\maketitre{%
	\newpage
	\thispagestyle{empty}
	\setcounter{section}{0}
	\null
	
	%\noindent \rule{\linewidth}{1pt}
	\vspace{-1.2cm}
	\begin{raggedleft}
		\newcolumntype{C}{ >{\raggedright \arraybackslash} m{12cm} }
		\newcolumntype{D}{ >{\centering \arraybackslash} m{5cm} }
		\begin{tabular}{C D}
				{\st@font \footnotesize \module} & {\scriptsize \textbf{\moduleAbrege}} \\
				{\st@font \textit{\small \@author} / {\small \annee{}}} & \multirow{2}{*}{\includegraphics[width=3.5cm]{../../_latex_assets/logo_iogs.png}}\\
				{\st@font \scriptsize \@institution{}} & \\
		\end{tabular}
	\end{raggedleft}
	
	\vspace{0.5cm}	
	
	\begin{raggedright}
	{\st@font \normalsize \@subtitle}
	\end{raggedright}
	
	\vspace{-0.3cm}
	
	\noindent \rule{\linewidth}{1pt}
	
	\vspace{0.1cm}
	
	\begin{raggedright}
	{\t@font \Large \uppercase\expandafter{\titre}}
	\end{raggedright}
	
	\vspace{-0.2cm}
	\noindent \rule{\linewidth}{1pt}
}
\makeatother

% En-tête de début de page / thématiques
\newcommand\enteteExercice{
	\def\thema{Exercice}
	\maketitle
	\medskip
}

% En-tête de début de page / thématiques
\newcommand\enteteThematiqueObligatoire{
	\maketitre
	\medskip
}

% Objectifs pédagogiques
\newcommand\encadreObjectifs[1]{
	\medskip
	\begin{tcolorbox}[colback=orange!3!white,colframe=orangeIO(ryb),title=\bfseries{Objectifs pédagogiques}]

	{#1}
	\end{tcolorbox}
}

% Activités pédagogiques
\newcommand\encadreActivites[1]{
	\medskip
	\begin{tcolorbox}[colback=green!3!white,colframe=green!75!black,title=\bfseries{Activités pédagogiques}]

	{#1}
	\end{tcolorbox}
}

% Correction
\newcommand\enteteCorrection{	
	\begin{raggedright}
		{\normalsize \sffamily Correction}
	\end{raggedright}
		
	\vspace{-0.3cm}
	
	\noindent \rule{\linewidth}{1pt}
}

% Exo Bonus
\newcommand\enteteBonus{	
	\begin{raggedright}
		{\normalsize \sffamily Exercice supplémentaire}
	\end{raggedright}
		
	\vspace{-0.3cm}
	
	\noindent \rule{\linewidth}{1pt}
	
	\vspace{0.1cm}
	
	\begin{raggedright}
	{\Large \uppercase\expandafter{\sffamily \textbf{\titre}}}
	\end{raggedright}
	
	\vspace{-0.2cm}
	\noindent \rule{\linewidth}{1pt}
}

% Réponses
\newcommand\answer[1]{
	\medskip
	\begin{tcolorbox}[colback=green!3!white,colframe=green!75!black,title=\bfseries{Réponse}]

	{#1}
	\end{tcolorbox}
}

% Réponses
\newcommand\seance[1]{
	\medskip
	\begin{tcolorbox}[colback=orangeIO(ryb)!3!white,colframe=orangeIO(ryb)!75!black,title=\bfseries{Complément d'information}]

	{#1}
	\end{tcolorbox}
}

% Certification
\newcommand\encadreCertification[1]{
	\medskip
	\begin{tcolorbox}[colback=violetIO(ryb)!3!white,colframe=violetIO(ryb),title=\bfseries{Certification}]

	{#1}
	\end{tcolorbox}
}
% Ressources supplémentaires
\newcommand\encadreRessources[1]{
	\medskip
	\begin{tcolorbox}[colback=black!3!white,colframe=black!50!white,title=\bfseries{Ressources Complémentaires}]

	{#1}
	\end{tcolorbox}
}
% Thématiques en lien / Exercices
\newcommand\encadreThemaExo[1]{
	\medskip
	\begin{tcolorbox}[colback=black!3!white,colframe=black!50!white,title=\bfseries{Thématique(s) associée(s)}]

	{#1}
	\end{tcolorbox}
}
% Definition / Cadre spécifique
\newcommand\encadreDefinition[2]{
	\medskip
	\begin{tcolorbox}[colback=red!3!white,colframe=red!50!black,title=\textbf{#1}]

	{#2}
	\end{tcolorbox}
}

% Exercices
\newcommand\encadreExercices[1]{
	\medskip
	\begin{tcolorbox}[colback=green!3!white,colframe=green!50!black,title=\bfseries{Exercice(s) associé(s)}]

	{#1}
	\end{tcolorbox}
}

% Exercices
\newcommand\encadreTDExo[2]{
	\medskip
	\begin{tcolorbox}[colback=white,colframe=green!50!black,title=\bfseries{Mission #1}]
	
	#2
	\end{tcolorbox}
}